{
  "name": "code-completion",
  "version": 0.1,
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "fullPageCodeCompletion": {
      "command": {
        "name": "OpenAI: Full Page Code Completion"
      },
      "code": "(() => { var mod=(()=>{var M=Object.create;var a=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var c=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!N.call(e,i)&&i!==o&&a(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var q=(e,t,o)=>(o=e!=null?M(R(e)):{},w(t||!e||!e.__esModule?a(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(a({},\"__esModule\",{value:!0}),e);var we={};c(we,{default:()=>he});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{dispatch:()=>_,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>B,getSelection:()=>L,getText:()=>j,hidePanel:()=>U,insertAtCursor:()=>X,insertAtPos:()=>V,matchBefore:()=>Z,moveCursor:()=>W,navigate:()=>F,openUrl:()=>G,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>H,save:()=>$,setPage:()=>I,setSelection:()=>Y,showPanel:()=>Q});function K(){return r(\"editor.getCurrentPage\")}function I(e){return r(\"editor.setPage\",e)}function j(){return r(\"editor.getText\")}function B(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function Y(e,t){return r(\"editor.setSelection\",e,t)}function $(){return r(\"editor.save\")}function F(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function G(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function Q(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function U(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function H(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function W(e){return r(\"editor.moveCursor\",e)}function X(e){return r(\"editor.insertAtCursor\",e)}function Z(e){return r(\"editor.matchBefore\",e)}function _(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var p={};c(p,{parseMarkdown:()=>oe});function oe(e){return r(\"markdown.parseMarkdown\",e)}var l={};c(l,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>de,readPage:()=>ae,writeAttachment:()=>fe,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function de(e){return r(\"space.readAttachment\",e)}function fe(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}var m=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}};function f(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...f(n,t)];return o}function g(e,t){return f(e,o=>o.type===t)[0]}function T(e,t){f(e,t)}var P=q(k(\"https://deno.land/std/encoding/yaml.ts\"));async function u(e,t=[\"yaml\"]){let o=await l.readPage(e),n=await p.parseMarkdown(o),i={};return T(n,d=>{if(d.type!==\"FencedCode\")return!1;let x=g(d,\"CodeInfo\");if(!x||!t.includes(x.children[0].text))return!1;let y=g(d,\"CodeText\");if(!y)return!1;let b=y.children[0].text;try{i=P.parse(b)}catch(h){throw console.error(\"YAML Page parser error\",h),new Error(`YAML Error: ${h.message}`)}return!0}),i}async function v(e){try{let t=await u(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}async function xe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\")}}async function ye(){try{return await u(\"openai/settings\")}catch(e){return console.log(e),[]}}async function C(){let e=await ye(),t=await s.getText();e.codeCompletion.prompt=t,console.log(e.codeCompletion);let o=await xe(),i=await new m(o).createCompletion(e.codeCompletion);s.insertAtCursor(i.choices[0].text)}var he=C;return O(we);})();\n return mod;})()"
    },
    "selectionCodeCompletion": {
      "command": {
        "name": "OpenAI: Selection Code Completion"
      },
      "code": "(() => { var mod=(()=>{var M=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!N.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var q=(e,t,o)=>(o=e!=null?M(R(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>he});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>_,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>B,getSelection:()=>L,getText:()=>j,hidePanel:()=>U,insertAtCursor:()=>X,insertAtPos:()=>V,matchBefore:()=>Z,moveCursor:()=>W,navigate:()=>F,openUrl:()=>G,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>H,save:()=>$,setPage:()=>I,setSelection:()=>Y,showPanel:()=>Q});function K(){return r(\"editor.getCurrentPage\")}function I(e){return r(\"editor.setPage\",e)}function j(){return r(\"editor.getText\")}function B(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function Y(e,t){return r(\"editor.setSelection\",e,t)}function $(){return r(\"editor.save\")}function F(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function G(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function Q(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function U(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function H(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function W(e){return r(\"editor.moveCursor\",e)}function X(e){return r(\"editor.insertAtCursor\",e)}function Z(e){return r(\"editor.matchBefore\",e)}function _(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>oe});function oe(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>de,readPage:()=>ae,writeAttachment:()=>fe,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function de(e){return r(\"space.readAttachment\",e)}function fe(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}};function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function P(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var x=q(k(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=P(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let y=P(a,\"CodeText\");if(!y)return!1;let b=y.children[0].text;try{i=x.parse(b)}catch(h){throw console.error(\"YAML Page parser error\",h),new Error(`YAML Error: ${h.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}async function xe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\")}}async function ye(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),[]}}async function C(){let e=await s.getText(),t=await s.getSelection(),o=e.slice(t.from,t.to),n=await ye();n.codeCompletion.prompt=o,console.log(n.codeCompletion);let i=await xe(),c=await new d(i).createCompletion(n.codeCompletion);s.insertAtPos(c.choices[0].text,t.to)}var he=C;return O(we);})();\n return mod;})()"
    },
    "readSettings": {
      "command": {
        "name": "OpenAI: Settings"
      },
      "code": "(() => { var mod=(()=>{var C=Object.create;var s=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var R=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,r)=>(typeof require!=\"undefined\"?require:t)[r]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,i)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of M(t))!S.call(e,n)&&n!==r&&s(e,n,{get:()=>t[n],enumerable:!(i=b(t,n))||i.enumerable});return e};var N=(e,t,r)=>(r=e!=null?C(A(e)):{},y(t||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),k=e=>y(s({},\"__esModule\",{value:!0}),e);var V={};l(V,{default:()=>U});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var o=self.syscall;var a={};l(a,{parseMarkdown:()=>E});function E(e){return o(\"markdown.parseMarkdown\",e)}var c={};l(c,{deleteAttachment:()=>D,deletePage:()=>Y,getAttachmentMeta:()=>z,getPageMeta:()=>j,listAttachments:()=>F,listPages:()=>I,listPlugs:()=>$,readAttachment:()=>G,readPage:()=>B,writeAttachment:()=>J,writePage:()=>L});function I(e=!1){return o(\"space.listPages\",e)}function j(e){return o(\"space.getPageMeta\",e)}function B(e){return o(\"space.readPage\",e)}function L(e,t){return o(\"space.writePage\",e,t)}function Y(e){return o(\"space.deletePage\",e)}function $(){return o(\"space.listPlugs\")}function F(){return o(\"space.listAttachments\")}function z(e){return o(\"space.getAttachmentMeta\",e)}function G(e){return o(\"space.readAttachment\",e)}function J(e,t,r){return o(\"space.writeAttachment\",e,t,r)}function D(e){return o(\"space.deleteAttachment\",e)}function m(e,t){if(t(e))return[e];let r=[];if(e.children)for(let i of e.children)r=[...r,...m(i,t)];return r}function u(e,t){return m(e,r=>r.type===t)[0]}function w(e,t){m(e,t)}var d=N(R(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let r=await c.readPage(e),i=await a.parseMarkdown(r),n={};return w(i,p=>{if(p.type!==\"FencedCode\")return!1;let g=u(p,\"CodeInfo\");if(!g||!t.includes(g.children[0].text))return!1;let P=u(p,\"CodeText\");if(!P)return!1;let v=P.children[0].text;try{n=d.parse(v)}catch(x){throw console.error(\"YAML Page parser error\",x),new Error(`YAML Error: ${x.message}`)}return!0}),n}async function T(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),[]}}var U=T;return k(V);})();\n return mod;})()"
    },
    "fullPageCompletion": {
      "command": {
        "name": "OpenAI: Full Page Completion"
      },
      "code": "(() => { var mod=(()=>{var M=Object.create;var a=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var c=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!N.call(e,i)&&i!==o&&a(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var q=(e,t,o)=>(o=e!=null?M(R(e)):{},w(t||!e||!e.__esModule?a(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(a({},\"__esModule\",{value:!0}),e);var we={};c(we,{default:()=>he});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{dispatch:()=>_,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>B,getSelection:()=>L,getText:()=>j,hidePanel:()=>U,insertAtCursor:()=>X,insertAtPos:()=>V,matchBefore:()=>Z,moveCursor:()=>W,navigate:()=>F,openUrl:()=>G,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>H,save:()=>$,setPage:()=>I,setSelection:()=>Y,showPanel:()=>Q});function K(){return r(\"editor.getCurrentPage\")}function I(e){return r(\"editor.setPage\",e)}function j(){return r(\"editor.getText\")}function B(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function Y(e,t){return r(\"editor.setSelection\",e,t)}function $(){return r(\"editor.save\")}function F(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function G(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function Q(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function U(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function H(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function W(e){return r(\"editor.moveCursor\",e)}function X(e){return r(\"editor.insertAtCursor\",e)}function Z(e){return r(\"editor.matchBefore\",e)}function _(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var p={};c(p,{parseMarkdown:()=>oe});function oe(e){return r(\"markdown.parseMarkdown\",e)}var l={};c(l,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>de,readPage:()=>ae,writeAttachment:()=>fe,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function de(e){return r(\"space.readAttachment\",e)}function fe(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}var m=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}};function f(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...f(n,t)];return o}function g(e,t){return f(e,o=>o.type===t)[0]}function T(e,t){f(e,t)}var P=q(k(\"https://deno.land/std/encoding/yaml.ts\"));async function u(e,t=[\"yaml\"]){let o=await l.readPage(e),n=await p.parseMarkdown(o),i={};return T(n,d=>{if(d.type!==\"FencedCode\")return!1;let x=g(d,\"CodeInfo\");if(!x||!t.includes(x.children[0].text))return!1;let y=g(d,\"CodeText\");if(!y)return!1;let b=y.children[0].text;try{i=P.parse(b)}catch(h){throw console.error(\"YAML Page parser error\",h),new Error(`YAML Error: ${h.message}`)}return!0}),i}async function v(e){try{let t=await u(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}async function xe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\")}}async function ye(){try{return await u(\"openai/settings\")}catch(e){return console.log(e),[]}}async function C(){let e=await ye(),t=await s.getText();e.completion.prompt=t,console.log(e.completion);let o=await xe(),i=await new m(o).createCompletion(e.completion);s.insertAtCursor(i.choices[0].text)}var he=C;return O(we);})();\n return mod;})()"
    },
    "selectionCompletion": {
      "command": {
        "name": "OpenAI: Selection Completion"
      },
      "code": "(() => { var mod=(()=>{var M=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!N.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var q=(e,t,o)=>(o=e!=null?M(R(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>he});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>_,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>B,getSelection:()=>L,getText:()=>j,hidePanel:()=>U,insertAtCursor:()=>X,insertAtPos:()=>V,matchBefore:()=>Z,moveCursor:()=>W,navigate:()=>F,openUrl:()=>G,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>H,save:()=>$,setPage:()=>I,setSelection:()=>Y,showPanel:()=>Q});function K(){return r(\"editor.getCurrentPage\")}function I(e){return r(\"editor.setPage\",e)}function j(){return r(\"editor.getText\")}function B(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function Y(e,t){return r(\"editor.setSelection\",e,t)}function $(){return r(\"editor.save\")}function F(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function G(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function Q(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function U(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function H(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function W(e){return r(\"editor.moveCursor\",e)}function X(e){return r(\"editor.insertAtCursor\",e)}function Z(e){return r(\"editor.matchBefore\",e)}function _(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>oe});function oe(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>de,readPage:()=>ae,writeAttachment:()=>fe,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function de(e){return r(\"space.readAttachment\",e)}function fe(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}};function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function P(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var x=q(k(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=P(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let y=P(a,\"CodeText\");if(!y)return!1;let b=y.children[0].text;try{i=x.parse(b)}catch(h){throw console.error(\"YAML Page parser error\",h),new Error(`YAML Error: ${h.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}async function xe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\")}}async function ye(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),[]}}async function C(){let e=await s.getText(),t=await s.getSelection(),o=e.slice(t.from,t.to),n=await ye();n.completion.prompt=o,console.log(n.completion);let i=await xe(),c=await new d(i).createCompletion(n.completion);s.insertAtPos(c.choices[0].text,t.to)}var he=C;return O(we);})();\n return mod;})()"
    },
    "imageGeneration": {
      "command": {
        "name": "OpenAI: Image Generation"
      },
      "code": "(() => { var mod=(()=>{var M=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of S(t))!N.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var q=(e,t,o)=>(o=e!=null?M(R(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>he});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>_,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>B,getSelection:()=>L,getText:()=>j,hidePanel:()=>U,insertAtCursor:()=>X,insertAtPos:()=>V,matchBefore:()=>Z,moveCursor:()=>W,navigate:()=>F,openUrl:()=>z,prompt:()=>ee,reloadPage:()=>G,replaceRange:()=>H,save:()=>$,setPage:()=>I,setSelection:()=>Y,showPanel:()=>Q});function K(){return r(\"editor.getCurrentPage\")}function I(e){return r(\"editor.setPage\",e)}function j(){return r(\"editor.getText\")}function B(){return r(\"editor.getCursor\")}function L(){return r(\"editor.getSelection\")}function Y(e,t){return r(\"editor.setSelection\",e,t)}function $(){return r(\"editor.save\")}function F(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function G(){return r(\"editor.reloadPage\")}function z(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function Q(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function U(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function H(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function W(e){return r(\"editor.moveCursor\",e)}function X(e){return r(\"editor.insertAtCursor\",e)}function Z(e){return r(\"editor.matchBefore\",e)}function _(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>oe});function oe(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>de,readPage:()=>ae,writeAttachment:()=>fe,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function de(e){return r(\"space.readAttachment\",e)}function fe(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}};function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function P(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var x=q(k(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=P(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let y=P(a,\"CodeText\");if(!y)return!1;let b=y.children[0].text;try{i=x.parse(b)}catch(h){throw console.error(\"YAML Page parser error\",h),new Error(`YAML Error: ${h.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}async function xe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\")}}async function ye(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),[]}}async function C(){let e=await ye(),t=await s.getText(),o=await s.getSelection(),n=t.slice(o.from,o.to);e.imageGeneration.prompt=n,console.log(e.imageGeneration);let i=await xe(),c=await new d(i).createImage(e.imageGeneration);s.insertAtPos(c.data[0].url,o.to)}var he=C;return O(we);})();\n return mod;})()"
    }
  },
  "assets": {}
}