{
  "name": "code-completion",
  "version": 0.1,
  "imports": [
    "https://get.silverbullet.md/global.plug.json"
  ],
  "functions": {
    "fullPageCodeCompletion": {
      "command": {
        "name": "OpenAI: Full Page Code Completion"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var a=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var c=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&a(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?a(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(a({},\"__esModule\",{value:!0}),e);var we={};c(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>G,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function G(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var p={};c(p,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var l={};c(l,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function d(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...d(n,t)];return o}function g(e,t){return d(e,o=>o.type===t)[0]}function T(e,t){d(e,t)}var h=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function m(e,t=[\"yaml\"]){let o=await l.readPage(e),n=await p.parseMarkdown(o),i={};return T(n,f=>{if(f.type!==\"FencedCode\")return!1;let P=g(f,\"CodeInfo\");if(!P||!t.includes(P.children[0].text))return!1;let x=g(f,\"CodeText\");if(!x)return!1;let S=x.children[0].text;try{i=h.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await m(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var u=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await m(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await xe(),t=await s.getText();e.codeCompletion.prompt=t,console.log(e.codeCompletion);try{let o=await Pe(),n=new u(o);s.flashNotification(\"Generating completion...\",\"info\");let i=await n.createCompletion(e.codeCompletion);s.insertAtCursor(i.choices[0].text)}catch(o){console.log(o),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    },
    "selectionCodeCompletion": {
      "command": {
        "name": "OpenAI: Selection Code Completion"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>G,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function G(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function h(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var P=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=h(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let x=h(a,\"CodeText\");if(!x)return!1;let S=x.children[0].text;try{i=P.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await s.getText(),t=await s.getSelection(),o=e.slice(t.from,t.to),n=await xe();n.codeCompletion.prompt=o,console.log(n.codeCompletion);try{let i=await Pe(),a=new d(i);s.flashNotification(\"Generating completion...\",\"info\");let c=await a.createCompletion(n.codeCompletion);s.insertAtPos(c.choices[0].text,t.to)}catch(i){console.log(i),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    },
    "readSettings": {
      "command": {
        "name": "OpenAI: Settings"
      },
      "code": "(() => { var mod=(()=>{var C=Object.create;var s=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var M=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,r)=>(typeof require!=\"undefined\"?require:t)[r]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var a=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of b(t))!N.call(e,i)&&i!==r&&s(e,i,{get:()=>t[i],enumerable:!(n=S(t,i))||n.enumerable});return e};var R=(e,t,r)=>(r=e!=null?C(A(e)):{},y(t||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),E=e=>y(s({},\"__esModule\",{value:!0}),e);var he={};a(he,{default:()=>ge});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var o=self.syscall;var c={};a(c,{dispatch:()=>W,enableReadOnlyMode:()=>Z,filterBox:()=>Y,flashNotification:()=>z,getCurrentPage:()=>O,getCursor:()=>j,getSelection:()=>k,getText:()=>G,hidePanel:()=>D,insertAtCursor:()=>_,insertAtPos:()=>U,matchBefore:()=>H,moveCursor:()=>V,navigate:()=>B,openUrl:()=>L,prompt:()=>X,reloadPage:()=>I,replaceRange:()=>Q,save:()=>$,setPage:()=>K,setSelection:()=>q,showPanel:()=>J});function O(){return o(\"editor.getCurrentPage\")}function K(e){return o(\"editor.setPage\",e)}function G(){return o(\"editor.getText\")}function j(){return o(\"editor.getCursor\")}function k(){return o(\"editor.getSelection\")}function q(e,t){return o(\"editor.setSelection\",e,t)}function $(){return o(\"editor.save\")}function B(e,t,r=!1){return o(\"editor.navigate\",e,t,r)}function I(){return o(\"editor.reloadPage\")}function L(e){return o(\"editor.openUrl\",e)}function z(e,t=\"info\"){return o(\"editor.flashNotification\",e,t)}function Y(e,t,r=\"\",n=\"\"){return o(\"editor.filterBox\",e,t,r,n)}function J(e,t,r,n=\"\"){return o(\"editor.showPanel\",e,t,r,n)}function D(e){return o(\"editor.hidePanel\",e)}function U(e,t){return o(\"editor.insertAtPos\",e,t)}function Q(e,t,r){return o(\"editor.replaceRange\",e,t,r)}function V(e){return o(\"editor.moveCursor\",e)}function _(e){return o(\"editor.insertAtCursor\",e)}function H(e){return o(\"editor.matchBefore\",e)}function W(e){return o(\"editor.dispatch\",e)}function X(e,t=\"\"){return o(\"editor.prompt\",e,t)}function Z(e){return o(\"editor.enableReadOnlyMode\",e)}var p={};a(p,{parseMarkdown:()=>te});function te(e){return o(\"markdown.parseMarkdown\",e)}var l={};a(l,{deleteAttachment:()=>fe,deletePage:()=>ae,getAttachmentMeta:()=>le,getPageMeta:()=>ne,listAttachments:()=>pe,listPages:()=>re,listPlugs:()=>ce,readAttachment:()=>me,readPage:()=>ie,writeAttachment:()=>ue,writePage:()=>se});function re(e=!1){return o(\"space.listPages\",e)}function ne(e){return o(\"space.getPageMeta\",e)}function ie(e){return o(\"space.readPage\",e)}function se(e,t){return o(\"space.writePage\",e,t)}function ae(e){return o(\"space.deletePage\",e)}function ce(){return o(\"space.listPlugs\")}function pe(){return o(\"space.listAttachments\")}function le(e){return o(\"space.getAttachmentMeta\",e)}function me(e){return o(\"space.readAttachment\",e)}function ue(e,t,r){return o(\"space.writeAttachment\",e,t,r)}function fe(e){return o(\"space.deleteAttachment\",e)}function u(e,t){if(t(e))return[e];let r=[];if(e.children)for(let n of e.children)r=[...r,...u(n,t)];return r}function f(e,t){return u(e,r=>r.type===t)[0]}function w(e,t){u(e,t)}var d=R(M(\"https://deno.land/std/encoding/yaml.ts\"));async function g(e,t=[\"yaml\"]){let r=await l.readPage(e),n=await p.parseMarkdown(r),i={};return w(n,m=>{if(m.type!==\"FencedCode\")return!1;let h=f(m,\"CodeInfo\");if(!h||!t.includes(h.children[0].text))return!1;let P=f(m,\"CodeText\");if(!P)return!1;let v=P.children[0].text;try{i=d.parse(v)}catch(x){throw console.error(\"YAML Page parser error\",x),new Error(`YAML Error: ${x.message}`)}return!0}),i}async function T(){try{return await g(\"openai/settings\")}catch(e){return console.log(e),c.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}var ge=T;return E(he);})();\n return mod;})()"
    },
    "fullPageCompletion": {
      "command": {
        "name": "OpenAI: Full Page Completion"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var a=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var c=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&a(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?a(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(a({},\"__esModule\",{value:!0}),e);var we={};c(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};c(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>G,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function G(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var p={};c(p,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var l={};c(l,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function d(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...d(n,t)];return o}function g(e,t){return d(e,o=>o.type===t)[0]}function T(e,t){d(e,t)}var h=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function m(e,t=[\"yaml\"]){let o=await l.readPage(e),n=await p.parseMarkdown(o),i={};return T(n,f=>{if(f.type!==\"FencedCode\")return!1;let P=g(f,\"CodeInfo\");if(!P||!t.includes(P.children[0].text))return!1;let x=g(f,\"CodeText\");if(!x)return!1;let S=x.children[0].text;try{i=h.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await m(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var u=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await m(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await xe(),t=await s.getText();e.completion.prompt=t,console.log(e.completion);try{let o=await Pe(),n=new u(o);s.flashNotification(\"Generating completion...\",\"info\");let i=await n.createCompletion(e.completion);s.insertAtCursor(i.choices[0].text)}catch(o){console.log(o),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    },
    "selectionCompletion": {
      "command": {
        "name": "OpenAI: Selection Completion"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>G,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function G(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function h(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var P=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=h(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let x=h(a,\"CodeText\");if(!x)return!1;let S=x.children[0].text;try{i=P.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await s.getText(),t=await s.getSelection(),o=e.slice(t.from,t.to),n=await xe();n.completion.prompt=o,console.log(n.completion);try{let i=await Pe(),a=new d(i);s.flashNotification(\"Generating completion...\",\"info\");let c=await a.createCompletion(n.completion);s.insertAtPos(c.choices[0].text,t.to)}catch(i){console.log(i),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    },
    "imageGeneration": {
      "command": {
        "name": "OpenAI: Image Generation"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var p=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var l=(e,t)=>{for(var o in t)p(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&p(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?p(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(p({},\"__esModule\",{value:!0}),e);var we={};l(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};l(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>K,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function K(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var m={};l(m,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var u={};l(u,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function g(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...g(n,t)];return o}function h(e,t){return g(e,o=>o.type===t)[0]}function T(e,t){g(e,t)}var P=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function f(e,t=[\"yaml\"]){let o=await u.readPage(e),n=await m.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=h(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let x=h(a,\"CodeText\");if(!x)return!1;let S=x.children[0].text;try{i=P.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await f(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var d=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await f(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await xe(),t=await s.getText(),o=await s.getSelection(),n=t.slice(o.from,o.to);e.imageGeneration.prompt=n,console.log(e.imageGeneration),s.flashNotification(\"Generating image...\",\"info\");try{let i=await Pe(),c=await new d(i).createImage(e.imageGeneration);s.insertAtPos(`![${n}](${c.data[0].url})`,o.to)}catch(i){console.log(i),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    },
    "editSelection": {
      "command": {
        "name": "OpenAI: Edit Selection"
      },
      "code": "(() => { var mod=(()=>{var b=Object.create;var l=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var E=(e=>typeof require!=\"undefined\"?require:typeof Proxy!=\"undefined\"?new Proxy(e,{get:(t,o)=>(typeof require!=\"undefined\"?require:t)[o]}):e)(function(e){if(typeof require!=\"undefined\")return require.apply(this,arguments);throw new Error('Dynamic require of \"'+e+'\" is not supported')});var m=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},w=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of N(t))!R.call(e,i)&&i!==o&&l(e,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return e};var F=(e,t,o)=>(o=e!=null?b(M(e)):{},w(t||!e||!e.__esModule?l(o,\"default\",{value:e,enumerable:!0}):o,e)),O=e=>w(l({},\"__esModule\",{value:!0}),e);var we={};m(we,{default:()=>ye});typeof self>\"u\"&&(self={syscall:()=>{throw new Error(\"Not implemented here\")}});var r=self.syscall;var s={};m(s,{dispatch:()=>Z,enableReadOnlyMode:()=>te,filterBox:()=>D,flashNotification:()=>J,getCurrentPage:()=>G,getCursor:()=>q,getSelection:()=>$,getText:()=>k,hidePanel:()=>Q,insertAtCursor:()=>W,insertAtPos:()=>V,matchBefore:()=>X,moveCursor:()=>H,navigate:()=>L,openUrl:()=>Y,prompt:()=>ee,reloadPage:()=>z,replaceRange:()=>_,save:()=>I,setPage:()=>j,setSelection:()=>B,showPanel:()=>U});function G(){return r(\"editor.getCurrentPage\")}function j(e){return r(\"editor.setPage\",e)}function k(){return r(\"editor.getText\")}function q(){return r(\"editor.getCursor\")}function $(){return r(\"editor.getSelection\")}function B(e,t){return r(\"editor.setSelection\",e,t)}function I(){return r(\"editor.save\")}function L(e,t,o=!1){return r(\"editor.navigate\",e,t,o)}function z(){return r(\"editor.reloadPage\")}function Y(e){return r(\"editor.openUrl\",e)}function J(e,t=\"info\"){return r(\"editor.flashNotification\",e,t)}function D(e,t,o=\"\",n=\"\"){return r(\"editor.filterBox\",e,t,o,n)}function U(e,t,o,n=\"\"){return r(\"editor.showPanel\",e,t,o,n)}function Q(e){return r(\"editor.hidePanel\",e)}function V(e,t){return r(\"editor.insertAtPos\",e,t)}function _(e,t,o){return r(\"editor.replaceRange\",e,t,o)}function H(e){return r(\"editor.moveCursor\",e)}function W(e){return r(\"editor.insertAtCursor\",e)}function X(e){return r(\"editor.matchBefore\",e)}function Z(e){return r(\"editor.dispatch\",e)}function ee(e,t=\"\"){return r(\"editor.prompt\",e,t)}function te(e){return r(\"editor.enableReadOnlyMode\",e)}var u={};m(u,{parseMarkdown:()=>re});function re(e){return r(\"markdown.parseMarkdown\",e)}var f={};m(f,{deleteAttachment:()=>ge,deletePage:()=>pe,getAttachmentMeta:()=>ue,getPageMeta:()=>se,listAttachments:()=>me,listPages:()=>ie,listPlugs:()=>le,readAttachment:()=>fe,readPage:()=>ae,writeAttachment:()=>de,writePage:()=>ce});function ie(e=!1){return r(\"space.listPages\",e)}function se(e){return r(\"space.getPageMeta\",e)}function ae(e){return r(\"space.readPage\",e)}function ce(e,t){return r(\"space.writePage\",e,t)}function pe(e){return r(\"space.deletePage\",e)}function le(){return r(\"space.listPlugs\")}function me(){return r(\"space.listAttachments\")}function ue(e){return r(\"space.getAttachmentMeta\",e)}function fe(e){return r(\"space.readAttachment\",e)}function de(e,t,o){return r(\"space.writeAttachment\",e,t,o)}function ge(e){return r(\"space.deleteAttachment\",e)}function h(e,t){if(t(e))return[e];let o=[];if(e.children)for(let n of e.children)o=[...o,...h(n,t)];return o}function P(e,t){return h(e,o=>o.type===t)[0]}function T(e,t){h(e,t)}var x=F(E(\"https://deno.land/std/encoding/yaml.ts\"));async function d(e,t=[\"yaml\"]){let o=await f.readPage(e),n=await u.parseMarkdown(o),i={};return T(n,a=>{if(a.type!==\"FencedCode\")return!1;let c=P(a,\"CodeInfo\");if(!c||!t.includes(c.children[0].text))return!1;let p=P(a,\"CodeText\");if(!p)return!1;let S=p.children[0].text;try{i=x.parse(S)}catch(y){throw console.error(\"YAML Page parser error\",y),new Error(`YAML Error: ${y.message}`)}return!0}),i}async function v(e){try{let t=await d(\"SECRETS\",[\"yaml\",\"secrets\"]),o=[];for(let n of e){let i=t[n];if(i)o.push(i);else throw new Error(`No such secret: ${n}`)}return o}catch(t){throw t.message===\"Page not found\"?new Error(`No such secret: ${e[0]}`):t}}var g=class{constructor(t){this.apiKey=t}async createCompletion(t){return(await fetch(\"https://api.openai.com/v1/completions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createEdit(t){return(await fetch(\"https://api.openai.com/v1/edits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createImage(t){return(await fetch(\"https://api.openai.com/v1/images/generations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async createModeration(t){return(await fetch(\"https://api.openai.com/v1/moderations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(t)})).json()}async getModels(){return(await fetch(\"https://api.openai.com/v1/models\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTune(t){return(await fetch(`https://api.openai.com/v1/fine-tunes/${t}`,{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async getFineTunes(){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`}})).json()}async createFineTune(t,o){return(await fetch(\"https://api.openai.com/v1/fine-tunes\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({training_file:t,model:o})})).json()}async uploadFile(t,o){let n=new FormData;return n.append(\"purpose\",\"fine-tune\"),n.append(\"file\",new Blob([t]),o),(await fetch(\"https://api.openai.com/v1/files\",{method:\"POST\",headers:{Authorization:`Bearer ${this.apiKey}`},body:n})).json()}};async function Pe(){try{let[e]=await v([\"openai\"]);return e}catch{console.error(\"No openai token found\"),s.flashNotification(\"SECRETS page missing, or OpenAI API token not configured correctly.\",\"error\")}}async function xe(){try{return await d(\"openai/settings\")}catch(e){return console.log(e),s.flashNotification(\"Settings page missing, or settings not configured correctly.\",\"error\"),[]}}async function C(){let e=await s.getText(),t=await s.getSelection(),o=e.slice(t.from,t.to),n=await xe(),i=await s.prompt(\"Enter edit instruction, for example 'Fix spelling' or 'Translate to Latin'\");n.edit.input=o,n.edit.instruction=i,console.log(n.edit);try{let a=await Pe(),c=new g(a);s.flashNotification(\"Generating edit...\",\"info\");let p=await c.createEdit(n.edit);s.insertAtPos(`\n\n Edited text: \n\n`+p.choices[0].text,t.to)}catch(a){console.log(a),s.flashNotification(\"Something went wrong\",\"error\")}s.flashNotification(\"Generation complete\",\"info\")}var ye=C;return O(we);})();\n return mod;})()"
    }
  },
  "assets": {}
}